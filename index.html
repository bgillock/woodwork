<html lang="en">
        
<head>
    <title>Woodwork</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="css/layout.css">
    </head>
</head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="https://golden-layout.com/files/latest/js/goldenlayout.min.js"></script>
<script src="src/panel.js"></script>
<script src="src/events.js"></script>
<link type="text/css" rel="stylesheet" href="https://golden-layout.com/files/latest/css/goldenlayout-base.css" />
<link type="text/css" rel="stylesheet" href="https://golden-layout.com/files/latest/css/goldenlayout-dark-theme.css" />
<script>    
var config = {
    content: [{
        type: 'row',
        content:[{
            type: 'component',
            componentName: 'testComponent',
            componentState: { div: 'assembly' }
        },{
            type: 'column',
            content:[{
                type: 'component',
                componentName: 'testComponent',
                componentState: { div: 'cuttop' }
            },{
                type: 'component',
                componentName: 'testComponent',
                componentState: { div: 'cutfront' }
            },{
                type: 'component',
                componentName: 'testComponent',
                componentState: { div: 'cutright' }
            },{
                type: 'component',
                componentName: 'testComponent',
                componentState: { div: 'cutpersp' }
            }]
        }]
    }]
};
var myLayout = new GoldenLayout( config );
myLayout.registerComponent( 'testComponent', function( container, componentState ){
    return new Panel(container, componentState)
//    container.getElement().html( '<div id=\"' + componentState.div + '\"></div>' );
});
myLayout.init();

</script>
<body>   
    <script>
        var gridGeometry
        var gridHelper, plane
        var mouse, raycaster, isShiftDown = false;
        var isControlDown = false
        var selectionMade = false
        var selectedPiece = null
        var rollOverMaterial = null
        var currentPiece = ""
        var assemblyObjects = []
        var cutObjects = []
        var pieces = []
        var cutPiece = null
        var cutScene = null

    </script>
    <script src="lib/three.min.js"></script>
    <script src="lib/OrbitControls.js"></script>
    <script src="lib/ThreeCSG.js"></script>
    <script src="lib/Detector.js"></script>
    <script src="src/face.js"></script>
    <script src="src/piece.js"></script>
    <script src="src/meshpiece.js"></script>
    <script src="src/assembly.js"></script>
    <script src="src/cut.js"></script>
    <script src="src/grid.js"></script>
    <script src="src/pull.js"></script>
    <script src="src/woodtypes.js"></script>
    <script>        
        
        var defaultPieceShape = new THREE.Vector3(400, 75, 100)
        if (!Detector.webgl) Detector.addGetWebGLMessage();
        var defaultCutterShape = new THREE.Vector3(20, 300, 300)
        var cutter = new MeshPiece(defaultCutterShape,0)
        var cutObjects = []
        window.addEventListener('load', onWindowLoad)
        function onWindowLoad() {
            initAssembly()
            renderAssembly()
            cutScene = initCutScene()
            var origin = new THREE.Vector3(defaultPieceShape.x / 2, defaultPieceShape.y / -2, defaultPieceShape.z / -2)
            cutPiece = new MeshPiece(defaultPieceShape, 1)
            //assignColorToSides(cutPiece.movegroup.geometry)

            cutPiece.position(origin)
            loadCutScene(cutPiece)       
            cutPiece.addToScene(cutScene, cutObjects)
            cutter.highlight()
            //assignColorToSides(cutter.movegroup.geometry)
            var origin = new THREE.Vector3(0, 0, 0)
            cutter.addToScene(cutScene, cutObjects)
            cutter.position(origin)       

            renderCut()
            initPull()
        }
    </script>

</body>

</html>